## Day5

1. mapper

   - 데이터베이스로부터 데이터를 조회/삭제/변경 등을
     수행하는 기본적인 쿼리를 담당하는 메서드의 모음
   - 공용 사용을 위해 비즈니스 로직은 거의 없음
   - (주문 추가) insert order, (포인트 적립) insert point

2. DAO(Data Access Object)

   - 주문 추가 + 포인트 적립
   - 이번달에는 주문 추가 + 포인트 적립을 호출하자

3. Bean

   - 이번달에 주문추가 + 포인트 적립을 호출할지 말지

4. Service

   - 주문 하기

5. 3-tier 구조

   - Spring 프로젝트는 3-tier 방식으로 구현된다.

   [Presentation]
   화면에 보여지는 기술을 사용하는 영역
   컨트롤러에서 사용자의 요청에 맞는 응답처리 진행
   HTML엔진(thymeleaf), HTML 등이 담당하는 영역

   [Business]
   순수한 비즈니스 로직을 담고 있는 영역
   고객이 원하는 요구사항을 반영하는 계층이기 때문에 중요

   [Persistence](영속 계층 또는 데이터 계층)
   데이터를 어떤 방식으로 보관하고 사용하는가에 대한 설계
   일반적으로는 DBMS를 많이 사용하나, 상황에 따라 네트워크 호출

   - 각 영역은 독립적으로 설계되어 나중에 특정한 기술이 변해도
     전자제품의 부품처럼 쉽게 교환될 수 있게 하자는 방식

   - 각 연결 부위는 인터페이스를 이용하여 설계하는 것이 일반적

   Presentation ----- Business ----- Persistence ----- DB
   | |
   Service I/F Mapper I/F

6. 게시판 제작 실습
   각 게시글(boardVO)마다 달라져야 하는 번호가 있다면 그것이 PK
   번호를 생성하는 방법은 2가지가 있음

   1. 가장 큰 번호를 찾아 + 1하기
      단점 : 게시글의 개수가 늘어날수록 속도가 느려짐
      단, 오라클은 인덱스를 거꾸로 읽는 기능 (index_desc)
      rownum = 1 조건을 추가하여 딱 1건만 선택 가능

      만약 글쓰기 버튼 클릭 시 바로 채번하는 경우
      동시에 2명 이상이 글을 쓰기를 시전하면
      한 명을 제외한 나머지는 PK 오류가 발생

   2. 시퀀스에서 채번하기
      물리 오브젝트인 시퀀스에서 숫자를 하나씩 가져온다.
      시퀀스는 꺼내갈 경우 기본적으로 1을 증가시킨다.
